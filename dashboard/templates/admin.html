<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>FRE Dashboard — Admin</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body { background: #0d1117; color: #e6edf3; font-family: "Segoe UI", Roboto, sans-serif; margin: 0; padding: 0;}
        .container { max-width: 1100px; margin: 20px auto; padding: 0 16px; }
        h1 { color: #58a6ff; text-align: center; }
        .card { background: #161b22; border: 1px solid #30363d; border-radius: 10px; padding: 16px; margin-bottom: 18px; }
        .row { display: flex; gap: 14px; flex-wrap: wrap; }
        .row .card { flex: 1 1 320px; }
        label { display: block; margin: 8px 0 4px; color: #8b949e; }
        input, textarea, select { width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #30363d; background: #0d1117; color: #e6edf3; }
        button { background: #238636; border: none; color: white; padding: 10px 14px; border-radius: 8px; cursor: pointer; }
        button.secondary { background: #30363d; }
        pre { background: #0d1117; border: 1px solid #30363d; border-radius: 8px; padding: 10px; height: 140px; overflow: auto; }
        .status { font-size: 14px; color: #8b949e; }
    </style>
</head>
<body>
<div class="container">
    <h1>Console Admin FRE Node</h1>

    <div class="card">
        <label for="token">Token admin (X-Admin-Token)</label>
        <input id="token" type="text" placeholder="Coller votre token" />
        <div style="margin-top:8px;">
            <button id="saveToken">Enregistrer le token</button>
            <button class="secondary" id="clearToken">Effacer</button>
        </div>
    </div>

    <div class="row">
        <div class="card">
            <h3>Services</h3>
            <button id="refreshStatus">Rafraîchir le statut</button>
            <button class="secondary" id="restartNode">Redémarrer fre_node</button>
            <button class="secondary" id="restartDash">Redémarrer fre_dashboard</button>
            <div class="status" id="servicesStatus"></div>
        </div>

        <div class="card">
            <h3>Mise à jour</h3>
            <button id="runUpdate">Forcer update</button>
            <pre id="updateLog">En attente...</pre>
        </div>
    </div>

    <div class="card">
        <h3>Validator local</h3>
        <label>Nom</label>
        <input id="valName" type="text" placeholder="fre-node-01">
        <label>Clé publique (base64url)</label>
        <textarea id="valPub" rows="2" placeholder="clé publique"></textarea>
        <label>Clé privée (base64url) — stockée localement</label>
        <textarea id="valPriv" rows="2" placeholder="clé privée"></textarea>
        <label>Stake</label>
        <input id="valStake" type="number" value="1" min="1">
        <button id="saveValidator">Enregistrer</button>
        <div class="status" id="valStatus"></div>
    </div>

    <div class="card">
        <h3>État rapide</h3>
        <pre id="quickStatus">Cliquez sur "Rafraîchir le statut"</pre>
    </div>
</div>

<script>
  const apiBase = "{{ api_base }}";
</script>
<script src="/static/admin.js"></script>
</body>
</html>
